# Spark vLLM Environment Configuration - GB10/Blackwell SOTA Optimizations
# Copy to .env and customize

# ==============================================================================
# HUGGINGFACE
# ==============================================================================
# HuggingFace Hub Token (for gated models like Llama 2)
# HUGGING_FACE_HUB_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================
# GPU SETTINGS
# ==============================================================================
# Specific GPUs to use (empty = all)
# CUDA_VISIBLE_DEVICES=0,1

# ==============================================================================
# SOTA GB10/BLACKWELL OPTIMIZATIONS
# ==============================================================================

# NVFP4 Support (4-bit floating point - Blackwell native)
VLLM_ENABLE_NVFP4=1

# FP8 Quantization (8-bit floating point - Hopper/Blackwell)
VLLM_FP8_ENABLED=1

# CUTLASS Optimizations (optimized kernels for SM120)
VLLM_CUTLASS_ENABLED=1

# FlashInfer Optimizations
VLLM_USE_FLASHINFER_SAMPLER=1
VLLM_USE_FLASHINFER_MOE_FP8=1
VLLM_USE_FLASHINFER_MOE_FP16=1
VLLM_BLOCKSCALE_FP8_GEMM_FLASHINFER=1

# Attention Backend (FLASH_ATTN, FLASHINFER, TRITON_ATTN)
VLLM_ATTENTION_BACKEND=FLASH_ATTN

# Multi-GPU optimizations
VLLM_CUSTOM_ALL_REDUCE=1

# ==============================================================================
# PERFORMANCE SETTINGS
# ==============================================================================

# Memory utilization (0.0-1.0, higher = more aggressive)
VLLM_MEMORY_FRACTION=0.95
VLLM_GPU_MEMORY_UTILIZATION=0.95

# Worker multiprocessing method
VLLM_WORKER_MULTIPROC_METHOD=spawn

# Logging level (DEBUG, INFO, WARNING, ERROR)
VLLM_LOGGING_LEVEL=INFO

# Enable function tracing for debugging
# VLLM_TRACE_FUNCTION=1

# ==============================================================================
# CACHE LOCATIONS
# ==============================================================================
HF_HOME=/state/huggingface
HUGGINGFACE_HUB_CACHE=/state/huggingface/hub
TORCH_HOME=/state/torch
XDG_CACHE_HOME=/state/cache
VLLM_HOME=/state/vllm

# ==============================================================================
# OPTIONAL API KEYS
# ==============================================================================
# OPENAI_API_KEY=sk-xxxxxxxx
